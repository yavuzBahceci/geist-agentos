# Phase 6: Specialize Agents

Now that standards are specialized, create specialist agents based on the project's abstraction layers.

## Core Responsibilities

1. **Read abstraction layers**: Get layers from basepoints knowledge
2. **Create specialist agents**: One specialist per abstraction layer
3. **Create specialist registry**: Registry file listing all specialists
4. **Generate report**: Document what was created

---

## Step 1: Load Abstraction Layers

**ACTION REQUIRED:** Read the following files:

1. `geist/output/deploy-agents/knowledge/basepoints-knowledge.json`
2. `geist/basepoints/headquarter.md`

Extract the abstraction layers identified in the project. Examples:
- UI / Presentation layer
- API / Service layer
- Data / Persistence layer
- Infrastructure layer

---

## Step 2: Create Specialist Agents

**ACTION REQUIRED:** For each abstraction layer, create a specialist agent file.

Create `geist/agents/specialists/` directory if it doesn't exist.

For each layer, create `geist/agents/specialists/[layer]-specialist.md`:

```markdown
---
name: [layer]-specialist
description: Specialist for [layer] layer implementation
tools: Read, Write, Grep, Glob, Shell
---

You are a specialist for the **[layer]** abstraction layer in this project.

## Your Expertise

- [Layer-specific patterns from basepoints]
- [Layer-specific conventions]
- [Layer-specific file locations]

## Key Files in Your Domain

- [List key directories/files for this layer]

## Standards to Follow

When implementing in this layer, follow:
- @geist/standards/global/coding-style.md
- @geist/standards/global/conventions.md

## Patterns to Use

[List patterns specific to this layer from basepoints]
```

---

## Step 3: Create Specialist Registry

**ACTION REQUIRED:** Create `geist/agents/specialists/registry.yml`:

```yaml
# Specialist Agent Registry
# Generated by deploy-agents based on project abstraction layers

specialists:
  - name: [layer1]-specialist
    layer: [layer1]
    file: geist/agents/specialists/[layer1]-specialist.md
    description: Handles [layer1] layer tasks
    collaborates_with: [layer2-specialist]  # Common collaborations
    
  - name: [layer2]-specialist
    layer: [layer2]
    file: geist/agents/specialists/[layer2]-specialist.md
    description: Handles [layer2] layer tasks
    collaborates_with: [layer1-specialist, layer3-specialist]

# Common collaboration patterns (for reference)
collaboration_patterns:
  - layers: [ui, api]
    description: "Frontend features requiring backend endpoints"
  - layers: [api, data]
    description: "API endpoints requiring database changes"
  - layers: [ui, api, data]
    description: "Full-stack features"

# Fallback for cross-layer tasks
default: implementer
```

**Collaboration hints:** The `collaborates_with` field helps `orchestrate-tasks` suggest multiple specialists for cross-layer tasks.

---

## Step 4: Generate Specialization Report

**ACTION REQUIRED:** Create `geist/output/deploy-agents/reports/agents-specialization.md`:

```markdown
# Agents Specialization Report

## Abstraction Layers Detected
- [List layers from basepoints]

## Specialists Created
| Specialist | Layer | File |
|------------|-------|------|
| [name] | [layer] | [path] |

## Registry
- Location: geist/agents/specialists/registry.yml
- Specialists: [count]
- Default fallback: implementer

## Usage
Specialists are selected by `orchestrate-tasks` based on task scope.
Tasks affecting multiple layers use the default implementer.
```

---

## Display confirmation and next step

Once agents are specialized, output:

```
âœ… Agents specialized for project!

**Abstraction Layers:** [list]
**Specialists Created:** [count]
**Registry:** geist/agents/specialists/registry.yml

Report: geist/output/deploy-agents/reports/agents-specialization.md

NEXT STEP ðŸ‘‰ Proceeding to phase 7: Navigate to Cleanup
```

---

## User Standards & Preferences Compliance

IMPORTANT: When creating specialists, ensure they reference:

@geist/standards/global/coding-style.md
@geist/standards/global/conventions.md
